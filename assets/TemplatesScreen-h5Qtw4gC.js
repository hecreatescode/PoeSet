import{r as a,v as p,d as k,j as e,t as x,w as S}from"./index-cIcf2WGv.js";import{T as C}from"./Modal-CgFMUB6N.js";import{P as D}from"./plus-EOzF2S2F.js";import{X as N}from"./x-DTSnJD4M.js";const A=({onBack:y,onUseTemplate:o})=>{const[d,g]=a.useState(p()),[i,l]=a.useState(!1),[m,c]=a.useState(null),[r,s]=a.useState({name:"",structure:"",example:""}),h=()=>{g(p())},b=t=>{if(t.preventDefault(),!r.name.trim()||!r.structure.trim())return;const w={id:m||`template_${crypto.randomUUID()}`,name:r.name.trim(),structure:r.structure.trim(),example:r.example.trim(),isCustom:!0};S(w),h(),u()},j=t=>{s({name:t.name,structure:t.structure,example:t.example||""}),c(t.id),l(!0)},{notify:B}=k(),[I,v]=a.useState(!1),[T,f]=a.useState(null),z=t=>{f(t),v(!0)},u=()=>{s({name:"",structure:"",example:""}),c(null),l(!1)};return e.jsxs("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"var(--bg-primary)",zIndex:100,display:"flex",flexDirection:"column"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"var(--spacing-lg)",borderBottom:"1px solid var(--light-border)",background:"var(--bg-secondary)"},children:[e.jsx("h1",{style:{fontSize:"1.5rem",fontWeight:600,margin:0,color:"var(--text-primary)"},children:"Szablony"}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[e.jsxs("button",{className:"button button-primary",onClick:()=>l(!i),children:[e.jsx(D,{size:20}),i?"Anuluj":"Nowy szablon"]}),e.jsx("button",{className:"button button-secondary",onClick:y,style:{padding:"0.5rem"},children:e.jsx(N,{size:20})})]})]}),i&&e.jsx("div",{style:{padding:"var(--spacing-lg)",borderBottom:"1px solid var(--light-border)",background:"var(--bg-card)"},children:e.jsxs("form",{onSubmit:b,style:{maxWidth:"800px",margin:"0 auto"},children:[e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:500,color:"var(--text-primary)"},children:"Nazwa szablonu *"}),e.jsx("input",{type:"text",className:"input",value:r.name,onChange:t=>s({...r,name:t.target.value}),placeholder:"np. Sonet, Haiku, Limerick...",required:!0})]}),e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:500,color:"var(--text-primary)"},children:"Struktura *"}),e.jsx("textarea",{className:"input",value:r.structure,onChange:t=>s({...r,structure:t.target.value}),placeholder:"Opisz strukturę wiersza (ilość zwrotek, wersów, rym, metrykę...)",rows:4,required:!0})]}),e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:500,color:"var(--text-primary)"},children:"Przykład (opcjonalnie)"}),e.jsx("textarea",{className:"input",value:r.example,onChange:t=>s({...r,example:t.target.value}),placeholder:"Dodaj przykładowy wiersz w tym stylu...",rows:6})]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[e.jsx("button",{type:"submit",className:"button button-primary",children:m?"Zapisz zmiany":"Dodaj szablon"}),e.jsx("button",{type:"button",className:"button button-secondary",onClick:u,children:"Anuluj"})]})]})}),e.jsxs("div",{style:{flex:1,overflow:"auto",padding:"var(--spacing-lg)"},children:[e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(350px, 1fr))",gap:"var(--spacing-md)",maxWidth:"1200px",margin:"0 auto"},children:d.map(t=>e.jsxs("div",{className:"card",style:{padding:"var(--spacing-md)",cursor:o?"pointer":"default",transition:"all 0.2s"},onClick:()=>o&&o(t),children:[e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",marginBottom:"0.75rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(x,{size:20,style:{color:"var(--accent-color)"}}),e.jsx("h3",{style:{fontSize:"1.1rem",fontWeight:600,margin:0,color:"var(--text-primary)"},children:t.name})]}),t.isCustom&&e.jsxs("div",{style:{display:"flex",gap:"0.25rem"},children:[e.jsx("button",{className:"button button-secondary",onClick:n=>{n.stopPropagation(),j(t)},style:{padding:"0.25rem 0.5rem",fontSize:"0.85rem"},children:"Edytuj"}),e.jsx("button",{className:"button button-secondary",onClick:n=>{n.stopPropagation(),z(t.id)},style:{padding:"0.25rem 0.5rem"},title:"Usuń szablon",children:e.jsx(C,{size:16})})]})]}),e.jsx("div",{style:{fontSize:"0.9rem",color:"var(--text-secondary)",lineHeight:1.6,marginBottom:"0.75rem",whiteSpace:"pre-wrap"},children:t.structure}),t.example&&e.jsx("div",{style:{marginTop:"0.75rem",padding:"0.75rem",background:"var(--bg-secondary)",borderRadius:"0.5rem",fontSize:"0.85rem",color:"var(--text-secondary)",fontStyle:"italic",whiteSpace:"pre-wrap",borderLeft:"3px solid var(--accent-color)"},children:t.example})]},t.id))}),d.length===0&&e.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"var(--text-secondary)"},children:[e.jsx(x,{size:48,style:{opacity:.3,marginBottom:"1rem"}}),e.jsx("p",{children:"Brak szablonów. Dodaj pierwszy szablon."})]})]})]})};export{A as default};
