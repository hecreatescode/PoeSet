import{c as C,u as H,g as Y,j as n,C as k}from"./index-CClFHwME.js";import{n as F,d as L,t as v,c as $,m as I,a as M,s as A}from"./differenceInCalendarDays-CYIPfUpj.js";import{s as E}from"./startOfMonth-VWHcTyc_.js";import{C as S,T as W}from"./tag-CPuHYkH-.js";const R=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],w=C("clock",R);const _=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Z=C("trending-up",_);function q(t,e,s){const[a,i]=F(s?.in,t,e),r=b(a,i),g=Math.abs(L(a,i));a.setDate(a.getDate()-r*g);const l=+(b(a,i)===-r),d=r*(g-l);return d===0?0:d}function b(t,e){const s=t.getFullYear()-e.getFullYear()||t.getMonth()-e.getMonth()||t.getDate()-e.getDate()||t.getHours()-e.getHours()||t.getMinutes()-e.getMinutes()||t.getSeconds()-e.getSeconds()||t.getMilliseconds()-e.getMilliseconds();return s<0?-1:s>0?1:s}function J(t,e){return v(t,e?.in).getDay()}function G(t,e){return v(t,e?.in).getHours()}function y(t,e){const s=()=>$(e?.in,NaN),i=X(t);let r;if(i.date){const m=tt(i.date,2);r=et(m.restDateString,m.year)}if(!r||isNaN(+r))return s();const g=+r;let l=0,d;if(i.time&&(l=st(i.time),isNaN(l)))return s();if(i.timezone){if(d=nt(i.timezone),isNaN(d))return s()}else{const m=new Date(g+l),u=v(0,e?.in);return u.setFullYear(m.getUTCFullYear(),m.getUTCMonth(),m.getUTCDate()),u.setHours(m.getUTCHours(),m.getUTCMinutes(),m.getUTCSeconds(),m.getUTCMilliseconds()),u}return v(g+l+d,e?.in)}const x={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},K=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,Q=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,V=/^([+-])(\d{2})(?::?(\d{2}))?$/;function X(t){const e={},s=t.split(x.dateTimeDelimiter);let a;if(s.length>2)return e;if(/:/.test(s[0])?a=s[0]:(e.date=s[0],a=s[1],x.timeZoneDelimiter.test(e.date)&&(e.date=t.split(x.timeZoneDelimiter)[0],a=t.substr(e.date.length,t.length))),a){const i=x.timezone.exec(a);i?(e.time=a.replace(i[1],""),e.timezone=i[1]):e.time=a}return e}function tt(t,e){const s=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),a=t.match(s);if(!a)return{year:NaN,restDateString:""};const i=a[1]?parseInt(a[1]):null,r=a[2]?parseInt(a[2]):null;return{year:r===null?i:r*100,restDateString:t.slice((a[1]||a[2]).length)}}function et(t,e){if(e===null)return new Date(NaN);const s=t.match(K);if(!s)return new Date(NaN);const a=!!s[4],i=h(s[1]),r=h(s[2])-1,g=h(s[3]),l=h(s[4]),d=h(s[5])-1;if(a)return ct(e,l,d)?at(e,l,d):new Date(NaN);{const m=new Date(0);return!rt(e,r,g)||!ot(e,i)?new Date(NaN):(m.setUTCFullYear(e,r,Math.max(i,g)),m)}}function h(t){return t?parseInt(t):1}function st(t){const e=t.match(Q);if(!e)return NaN;const s=D(e[1]),a=D(e[2]),i=D(e[3]);return lt(s,a,i)?s*I+a*M+i*1e3:NaN}function D(t){return t&&parseFloat(t.replace(",","."))||0}function nt(t){if(t==="Z")return 0;const e=t.match(V);if(!e)return 0;const s=e[1]==="+"?-1:1,a=parseInt(e[2]),i=e[3]&&parseInt(e[3])||0;return dt(a,i)?s*(a*I+i*M):NaN}function at(t,e,s){const a=new Date(0);a.setUTCFullYear(t,0,4);const i=a.getUTCDay()||7,r=(e-1)*7+s+1-i;return a.setUTCDate(a.getUTCDate()+r),a}const it=[31,null,31,30,31,30,31,31,30,31,30,31];function P(t){return t%400===0||t%4===0&&t%100!==0}function rt(t,e,s){return e>=0&&e<=11&&s>=1&&s<=(it[e]||(P(t)?29:28))}function ot(t,e){return e>=1&&e<=(P(t)?366:365)}function ct(t,e,s){return e>=1&&e<=53&&s>=0&&s<=6}function lt(t,e,s){return t===24?e===0&&s===0:s>=0&&s<60&&e>=0&&e<60&&t>=0&&t<25}function dt(t,e){return e>=0&&e<=59}const gt=t=>{if(t.length===0)return{totalPoems:0,poemsThisWeek:0,poemsThisMonth:0,averageLength:0,mostUsedTags:[],writingStreak:0,mostProductiveDay:"Brak danych",mostProductiveHour:0};const e=new Date,s=A(e,{weekStartsOn:1}),a=E(e),i=t.filter(o=>y(o.date)>=s).length,r=t.filter(o=>y(o.date)>=a).length,g=t.reduce((o,c)=>o+c.content.length,0),l=Math.round(g/t.length),d={};t.forEach(o=>{o.tags.forEach(c=>{d[c]=(d[c]||0)+1})});const m=Object.entries(d).map(([o,c])=>({tag:o,count:c})).sort((o,c)=>c.count-o.count).slice(0,5),u=t.map(o=>o.date.split("T")[0]).filter((o,c,p)=>p.indexOf(o)===c).sort().reverse();let z=0;const U=e.toISOString().split("T")[0];if(u.length>0){let o=new Date(U);for(const c of u){const p=new Date(c),T=q(o,p);if(T===0||T===1)z++,o=p;else break}}const j={};t.forEach(o=>{const c=J(y(o.date));j[c]=(j[c]||0)+1});const N=Object.entries(j).sort((o,c)=>c[1]-o[1])[0]?.[0],O=N?["Niedziela","Poniedziałek","Wtorek","Środa","Czwartek","Piątek","Sobota"][parseInt(N)]:"Brak danych",f={};t.forEach(o=>{const c=G(y(o.createdAt||o.date));f[c]=(f[c]||0)+1});const B=Object.entries(f).sort((o,c)=>c[1]-o[1])[0]?.[0]?parseInt(Object.entries(f).sort((o,c)=>c[1]-o[1])[0][0]):0;return{totalPoems:t.length,poemsThisWeek:i,poemsThisMonth:r,averageLength:l,mostUsedTags:m,writingStreak:z,mostProductiveDay:O,mostProductiveHour:B}},yt=()=>{const{t}=H(),e=Y(),s=gt(e),i=(()=>{const r={},g=new Set(["i","a","w","z","na","do","po","o","to","się","że","nie","by","te","za","od","ze","przy","ale","lub","oraz","jest","są","jak","gdy","już","tylko","jeszcze","czyli","więc","może","czy","tam","tu","dla","przed","pod","przez"]);return e.forEach(l=>{(`${l.title} ${l.content}`.toLowerCase().match(/[a-ząćęłńóśźż]+/g)||[]).forEach(u=>{u.length>3&&!g.has(u)&&(r[u]=(r[u]||0)+1)})}),Object.entries(r).sort((l,d)=>d[1]-l[1]).slice(0,20).map(([l,d])=>({word:l,count:d}))})();return n.jsxs("div",{children:[n.jsxs("header",{className:"mb-xl",children:[n.jsx("h1",{style:{fontSize:"2rem",marginBottom:"0.5rem",fontWeight:300},children:t.statistics.title}),n.jsx("p",{className:"text-secondary",children:t.statistics.subtitle})]}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"var(--spacing-md)",marginBottom:"var(--spacing-xl)"},children:[n.jsxs("div",{className:"card",style:{textAlign:"center",cursor:"default"},children:[n.jsx(k,{size:32,style:{margin:"0 auto var(--spacing-sm)",opacity:.6}}),n.jsx("p",{style:{fontSize:"2rem",fontWeight:300,marginBottom:"var(--spacing-xs)"},children:s.totalPoems}),n.jsx("p",{className:"text-secondary",style:{fontSize:"0.875rem"},children:t.statistics.totalPoems})]}),n.jsxs("div",{className:"card",style:{textAlign:"center",cursor:"default"},children:[n.jsx(Z,{size:32,style:{margin:"0 auto var(--spacing-sm)",opacity:.6}}),n.jsx("p",{style:{fontSize:"2rem",fontWeight:300,marginBottom:"var(--spacing-xs)"},children:s.writingStreak}),n.jsx("p",{className:"text-secondary",style:{fontSize:"0.875rem"},children:t.statistics.currentStreak})]}),n.jsxs("div",{className:"card",style:{textAlign:"center",cursor:"default"},children:[n.jsx(S,{size:32,style:{margin:"0 auto var(--spacing-sm)",opacity:.6}}),n.jsx("p",{style:{fontSize:"2rem",fontWeight:300,marginBottom:"var(--spacing-xs)"},children:s.poemsThisWeek}),n.jsx("p",{className:"text-secondary",style:{fontSize:"0.875rem"},children:t.statistics.averagePerWeek})]}),n.jsxs("div",{className:"card",style:{textAlign:"center",cursor:"default"},children:[n.jsx(w,{size:32,style:{margin:"0 auto var(--spacing-sm)",opacity:.6}}),n.jsx("p",{style:{fontSize:"2rem",fontWeight:300,marginBottom:"var(--spacing-xs)"},children:s.poemsThisMonth}),n.jsx("p",{className:"text-secondary",style:{fontSize:"0.875rem"},children:t.statistics.mostProductiveDay})]})]}),n.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"var(--spacing-lg)"},children:[n.jsxs("div",{className:"card",style:{cursor:"default"},children:[n.jsxs("h3",{style:{marginBottom:"var(--spacing-md)",fontWeight:500,display:"flex",alignItems:"center",gap:"var(--spacing-sm)"},children:[n.jsx(S,{size:20}),t.statistics.mostProductiveDay]}),n.jsx("p",{style:{fontSize:"1.5rem",fontWeight:300},children:s.mostProductiveDay==="Brak danych"?t.statistics.noData:s.mostProductiveDay})]}),n.jsxs("div",{className:"card",style:{cursor:"default"},children:[n.jsxs("h3",{style:{marginBottom:"var(--spacing-md)",fontWeight:500,display:"flex",alignItems:"center",gap:"var(--spacing-sm)"},children:[n.jsx(w,{size:20}),t.statistics.mostProductiveHour]}),n.jsxs("p",{style:{fontSize:"1.5rem",fontWeight:300},children:[s.mostProductiveHour,":00 - ",s.mostProductiveHour+1,":00"]})]}),n.jsxs("div",{className:"card",style:{cursor:"default"},children:[n.jsxs("h3",{style:{marginBottom:"var(--spacing-md)",fontWeight:500,display:"flex",alignItems:"center",gap:"var(--spacing-sm)"},children:[n.jsx(k,{size:20}),t.statistics.averageLength]}),n.jsxs("p",{style:{fontSize:"1.5rem",fontWeight:300},children:[s.averageLength," ",t.statistics.characters]})]}),s.mostUsedTags.length>0&&n.jsxs("div",{className:"card",style:{cursor:"default"},children:[n.jsxs("h3",{style:{marginBottom:"var(--spacing-md)",fontWeight:500,display:"flex",alignItems:"center",gap:"var(--spacing-sm)"},children:[n.jsx(W,{size:20}),t.statistics.popularTags]}),n.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"var(--spacing-md)"},children:s.mostUsedTags.map((r,g)=>n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"var(--spacing-md)"},children:[n.jsxs("span",{style:{fontSize:"1.5rem",fontWeight:300,minWidth:"2rem",color:"var(--light-text-secondary)"},children:[g+1,"."]}),n.jsx("div",{style:{flex:1},children:n.jsxs("div",{style:{height:"2rem",background:"var(--light-border)",borderRadius:"var(--radius-sm)",position:"relative",overflow:"hidden"},children:[n.jsx("div",{style:{position:"absolute",top:0,left:0,height:"100%",width:`${r.count/s.mostUsedTags[0].count*100}%`,background:"var(--light-accent)",transition:"width var(--transition-normal)"}}),n.jsx("span",{style:{position:"absolute",top:"50%",left:"var(--spacing-md)",transform:"translateY(-50%)",fontWeight:500,color:"white",mixBlendMode:"difference"},children:r.tag})]})}),n.jsx("span",{style:{fontWeight:500,minWidth:"3rem",textAlign:"right"},children:r.count})]},r.tag))})]}),i.length>0&&n.jsxs("div",{className:"card",style:{cursor:"default"},children:[n.jsxs("h3",{style:{marginBottom:"var(--spacing-md)",fontWeight:500,display:"flex",alignItems:"center",gap:"var(--spacing-sm)"},children:[n.jsx(W,{size:20}),"Najczęściej używane słowa"]}),n.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"var(--spacing-xs)"},children:i.map((r,g)=>n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"var(--spacing-md)"},children:[n.jsx("div",{style:{flex:1,position:"relative",minHeight:"2rem"},children:n.jsxs("div",{style:{position:"relative",height:"2rem",borderRadius:"var(--radius-sm)",overflow:"hidden"},children:[n.jsx("div",{style:{position:"absolute",top:0,left:0,height:"100%",width:`${r.count/i[0].count*100}%`,background:`hsl(${200-g*5}, 70%, 50%)`,transition:"width var(--transition-normal)"}}),n.jsx("span",{style:{position:"absolute",top:"50%",left:"var(--spacing-md)",transform:"translateY(-50%)",fontWeight:500,zIndex:1},children:r.word})]})}),n.jsx("span",{style:{fontWeight:500,minWidth:"3rem",textAlign:"right"},children:r.count})]},r.word))})]})]})]})};export{yt as default};
