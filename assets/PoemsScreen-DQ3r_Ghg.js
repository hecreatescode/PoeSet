import{c as P,u as L,r as o,g as h,j as e}from"./index-DevDqopC.js";import{P as N}from"./PoemViewer-DhftuCEj.js";import{f as M,p as k,e as z}from"./PoemEditor-DUJphogH.js";import"./differenceInCalendarDays-BuJXk5z3.js";const B=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],D=P("search",B),y=20,_=()=>{const{t:s,language:x}=L(),f=x==="pl"?k:z,[g,j]=o.useState(()=>h()),[r,b]=o.useState(""),[u,d]=o.useState(null),[l,m]=o.useState("newest"),[c,w]=o.useState(y),n=o.useMemo(()=>{let t=[...g];return r&&(t=t.filter(a=>a.title.toLowerCase().includes(r.toLowerCase())||a.content.toLowerCase().includes(r.toLowerCase())||a.tags.some(i=>i.toLowerCase().includes(r.toLowerCase())))),t.sort((a,i)=>{switch(l){case"newest":return new Date(i.date).getTime()-new Date(a.date).getTime();case"oldest":return new Date(a.date).getTime()-new Date(i.date).getTime();case"alphabetical":return a.title.localeCompare(i.title);default:return 0}}),t},[g,r,l]),p=o.useMemo(()=>n.slice(0,c),[n,c]),v=c<n.length,S=()=>{const t=h();j(t),d(null)},C=()=>{w(t=>t+y)};return e.jsxs("div",{style:{padding:"var(--spacing-lg)"},children:[e.jsxs("header",{style:{marginBottom:"var(--spacing-xl)"},children:[e.jsx("h1",{style:{fontSize:"2rem",marginBottom:"0.5rem",fontWeight:300},children:s.poems.title}),e.jsx("p",{className:"text-secondary",children:s.poems.subtitle})]}),e.jsxs("div",{style:{marginBottom:"var(--spacing-lg)"},children:[e.jsxs("div",{style:{position:"relative",marginBottom:"var(--spacing-md)"},children:[e.jsx(D,{size:20,style:{position:"absolute",left:"1rem",top:"50%",transform:"translateY(-50%)",opacity:.5}}),e.jsx("input",{type:"text",className:"input",placeholder:s.poems.search,value:r,onChange:t=>b(t.target.value),style:{paddingLeft:"3rem"}})]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[e.jsx("button",{className:`button ${l==="newest"?"button-primary":"button-secondary"}`,onClick:()=>m("newest"),style:{fontSize:"0.875rem",padding:"0.5rem 1rem"},children:s.poems.newest}),e.jsx("button",{className:`button ${l==="oldest"?"button-primary":"button-secondary"}`,onClick:()=>m("oldest"),style:{fontSize:"0.875rem",padding:"0.5rem 1rem"},children:s.poems.oldest}),e.jsx("button",{className:`button ${l==="alphabetical"?"button-primary":"button-secondary"}`,onClick:()=>m("alphabetical"),style:{fontSize:"0.875rem",padding:"0.5rem 1rem"},children:s.poems.alphabetical})]})]}),n.length===0?e.jsx("div",{style:{textAlign:"center",padding:"3rem 1rem"},children:e.jsx("p",{className:"text-secondary",children:r?s.poems.noResults:s.poems.noPoems})}):e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-secondary mb-md",style:{fontSize:"0.875rem"},children:[n.length," ",n.length===1?s.poems.countSingular:s.poems.count,p.length<n.length&&e.jsxs("span",{children:[" (",s.poems.shown," ",p.length,")"]})]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"var(--spacing-md)"},children:p.map(t=>e.jsxs("div",{className:"card",onClick:()=>d(t),children:[e.jsx("h3",{style:{marginBottom:"0.5rem",fontWeight:500},children:t.title||s.editor.untitled}),e.jsx("p",{className:"text-secondary",style:{fontSize:"0.875rem",marginBottom:"1rem"},children:M(new Date(t.date),"d MMMM yyyy",{locale:f})}),e.jsx("p",{style:{whiteSpace:"pre-wrap",lineHeight:1.6,maxHeight:"100px",overflow:"hidden",textOverflow:"ellipsis"},children:t.content}),t.tags.length>0&&e.jsxs("div",{style:{marginTop:"1rem",display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[t.tags.slice(0,3).map(a=>e.jsx("span",{style:{fontSize:"0.75rem",padding:"0.25rem 0.75rem",borderRadius:"var(--radius-full)",background:"var(--light-border)"},children:a},a)),t.tags.length>3&&e.jsxs("span",{style:{fontSize:"0.75rem",padding:"0.25rem 0.75rem",borderRadius:"var(--radius-full)",background:"var(--light-border)"},children:["+",t.tags.length-3]})]})]},t.id))}),v&&e.jsxs("button",{className:"button button-secondary",onClick:C,style:{marginTop:"var(--spacing-lg)",width:"100%"},children:[s.poems.loadMore," (",n.length-c," ",s.poems.remaining,")"]})]}),u&&e.jsx(N,{poem:u,onClose:()=>d(null),onUpdate:S})]})};export{_ as default};
