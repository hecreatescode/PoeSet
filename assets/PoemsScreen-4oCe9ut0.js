import{c as b,r as n,g,j as e}from"./index-DUjVVPir.js";import{P as v}from"./PoemViewer-CVI7FHxY.js";import{f as S,p as C}from"./PoemEditor-DwOHfkiM.js";import"./differenceInCalendarDays-CdXAuEcn.js";const N=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],P=b("search",N),u=20,D=()=>{const[p,y]=n.useState(()=>g()),[r,x]=n.useState(""),[h,c]=n.useState(null),[l,d]=n.useState("newest"),[i,j]=n.useState(u),a=n.useMemo(()=>{let t=[...p];return r&&(t=t.filter(s=>s.title.toLowerCase().includes(r.toLowerCase())||s.content.toLowerCase().includes(r.toLowerCase())||s.tags.some(o=>o.toLowerCase().includes(r.toLowerCase())))),t.sort((s,o)=>{switch(l){case"newest":return new Date(o.date).getTime()-new Date(s.date).getTime();case"oldest":return new Date(s.date).getTime()-new Date(o.date).getTime();case"alphabetical":return s.title.localeCompare(o.title);default:return 0}}),t},[p,r,l]),m=n.useMemo(()=>a.slice(0,i),[a,i]),f=i<a.length,w=()=>{const t=g();y(t),c(null)},z=()=>{j(t=>t+u)};return e.jsxs("div",{style:{padding:"var(--spacing-lg)"},children:[e.jsxs("header",{style:{marginBottom:"var(--spacing-xl)"},children:[e.jsx("h1",{style:{fontSize:"2rem",marginBottom:"0.5rem",fontWeight:300},children:"Wiersze"}),e.jsx("p",{className:"text-secondary",children:"Twoja biblioteka twórczości"})]}),e.jsxs("div",{style:{marginBottom:"var(--spacing-lg)"},children:[e.jsxs("div",{style:{position:"relative",marginBottom:"var(--spacing-md)"},children:[e.jsx(P,{size:20,style:{position:"absolute",left:"1rem",top:"50%",transform:"translateY(-50%)",opacity:.5}}),e.jsx("input",{type:"text",className:"input",placeholder:"Szukaj wierszy...",value:r,onChange:t=>x(t.target.value),style:{paddingLeft:"3rem"}})]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[e.jsx("button",{className:`button ${l==="newest"?"button-primary":"button-secondary"}`,onClick:()=>d("newest"),style:{fontSize:"0.875rem",padding:"0.5rem 1rem"},children:"Najnowsze"}),e.jsx("button",{className:`button ${l==="oldest"?"button-primary":"button-secondary"}`,onClick:()=>d("oldest"),style:{fontSize:"0.875rem",padding:"0.5rem 1rem"},children:"Najstarsze"}),e.jsx("button",{className:`button ${l==="alphabetical"?"button-primary":"button-secondary"}`,onClick:()=>d("alphabetical"),style:{fontSize:"0.875rem",padding:"0.5rem 1rem"},children:"Alfabetycznie"})]})]}),a.length===0?e.jsx("div",{style:{textAlign:"center",padding:"3rem 1rem"},children:e.jsx("p",{className:"text-secondary",children:r?"Nie znaleziono wierszy.":"Nie masz jeszcze żadnych wierszy."})}):e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-secondary mb-md",style:{fontSize:"0.875rem"},children:[a.length," ",a.length===1?"wiersz":"wierszy",m.length<a.length&&e.jsxs("span",{children:[" (pokazano ",m.length,")"]})]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"var(--spacing-md)"},children:m.map(t=>e.jsxs("div",{className:"card",onClick:()=>c(t),children:[e.jsx("h3",{style:{marginBottom:"0.5rem",fontWeight:500},children:t.title||"Bez tytułu"}),e.jsx("p",{className:"text-secondary",style:{fontSize:"0.875rem",marginBottom:"1rem"},children:S(new Date(t.date),"d MMMM yyyy",{locale:C})}),e.jsx("p",{style:{whiteSpace:"pre-wrap",lineHeight:1.6,maxHeight:"100px",overflow:"hidden",textOverflow:"ellipsis"},children:t.content}),t.tags.length>0&&e.jsxs("div",{style:{marginTop:"1rem",display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[t.tags.slice(0,3).map(s=>e.jsx("span",{style:{fontSize:"0.75rem",padding:"0.25rem 0.75rem",borderRadius:"var(--radius-full)",background:"var(--light-border)"},children:s},s)),t.tags.length>3&&e.jsxs("span",{style:{fontSize:"0.75rem",padding:"0.25rem 0.75rem",borderRadius:"var(--radius-full)",background:"var(--light-border)"},children:["+",t.tags.length-3]})]})]},t.id))}),f&&e.jsxs("button",{className:"button button-secondary",onClick:z,style:{marginTop:"var(--spacing-lg)",width:"100%"},children:["Załaduj więcej (",a.length-i," pozostało)"]})]}),h&&e.jsx(v,{poem:h,onClose:()=>c(null),onUpdate:w})]})};export{D as default};
